<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Software Downloads</title>
  <link rel="icon" href="https://sdmntprpolandcentral.oaiusercontent.com/files/00000000-810c-620a-b050-63ce7342e2fa/raw?se=2025-10-05T07%3A12%3A07Z&sp=r&sv=2024-08-04&sr=b&scid=bc7cd1ba-bc77-50ec-be7c-b20468414145&skoid=9063adf3-a524-4acf-b70a-8731b33f2f50&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2025-10-04T21%3A51%3A43Z&ske=2025-10-05T21%3A51%3A43Z&sks=b&skv=2024-08-04&sig=SHIGOgPOYi25%2BOcI3DUXRZgNU6j97KC6ANq64iQrY/w%3D">

  <style>
    /* Base body */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f8f9fa;
      color: #333;
      max-width: 1000px;
      margin-left: auto;
      margin-right: auto;
    }

    h1, h2, h3 {
      text-align: center;
      color: #0070f3;
    }

    /* Main content */
    .main-content {
      display: block;
    }
    .main-content.hidden {
      display: none;
    }

    /* Dashboard */
    .dashboard {
      display: none;
      max-height: 90vh;
      overflow-y: auto;
      padding: 20px;
    }

    .dashboard h2 {
      margin-bottom: 15px;
    }

    .add-form, .software-item {
      background: #fff;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
    }

    .add-form input, .edit-form input {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    .btn {
      padding: 8px 16px;
      margin: 5px 2px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    .btn-primary { background: #0070f3; color: white; }
    .btn-primary:hover { background: #0056c7; }
    .btn-danger { background: #dc3545; color: white; }
    .btn-danger:hover { background: #c82333; }
    .btn-secondary { background: #6c757d; color: white; }
    .btn-secondary:hover { background: #545b62; }
    .btn-success { background: #28a745; color: white; }
    .btn-success:hover { background: #218838; }

    /* Login button */
    .login-btn {
      display: block;
      margin: 20px auto;
      padding: 12px 24px;
      background: #0070f3;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      border: none;
    }
    .login-btn:hover { background: #0056c7; }

    /* Search bar */
    .search-container {
      text-align: center;
      margin-bottom: 30px;
    }
    .search-container input {
      width: 80%;
      max-width: 400px;
      padding: 10px 15px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      outline: none;
      transition: border-color 0.2s;
    }
    .search-container input:focus { border-color: #0070f3; }

    /* Software grid */
    .wrap {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
      padding: 10px;
    }

    .software {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .software:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .software img {
      width: 64px;
      height: 64px;
      object-fit: contain;
      margin-bottom: 10px;
    }
    .software h2 {
      margin: 0 0 10px 0;
      font-size: 1.1em;
      color: #0070f3;
    }
    .download-btn {
      display: inline-block;
      margin-top: 10px;
      padding: 10px 18px;
      background: #0070f3;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      transition: background 0.2s ease;
    }
    .download-btn:hover { background: #0056c7; }
    .checksum { font-size: 0.9em; color: #555; margin-top: 8px; word-break: break-all; }

    /* Modals */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }
    .modal-content {
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
      margin: 0 auto;
      top: 50%;
      transform: translateY(-50%);
      position: relative;
      text-align: center;
    }
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close:hover { color: #000; }

    /* Hidden */
    .hidden { display: none; }

    /* Footer */
    footer { text-align: center; color: #777; margin-top: 40px; font-size: 0.9em; }

    /* Mobile adjustments */
    @media(max-width:480px){
      .wrap { gap: 10px; }
      .software { padding: 15px; }
      .search-container input { width: 95%; }
    }
  </style>
</head>
<body>
  <!-- Main Content -->
  <div id="mainContent" class="main-content">
    <h1>Download Center</h1>
    <button class="login-btn" onclick="showLoginModal()">Admin Login</button>

    <div class="search-container">
      <input type="text" id="searchBox" placeholder="Search software...">
    </div>

    <div class="wrap" id="softwareList"></div>

    <footer>Â© 2025 My Software Downloads</footer>
  </div>

  <!-- Dashboard -->
  <div id="dashboard" class="dashboard">
    <h2>Admin Dashboard</h2>
    <button class="btn btn-secondary" onclick="logout()">Logout</button>

    <div class="add-form">
      <h3>Add New Software</h3>
      <input type="text" id="newTitle" placeholder="Software Title">
      <input type="url" id="newImage" placeholder="Image URL">
      <input type="url" id="newDownload" placeholder="Download URL">
      <input type="text" id="newChecksum" placeholder="Checksum/Note">
      <button class="btn btn-primary" onclick="addSoftware()">Add Software</button>
    </div>

    <div id="manageList"></div>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeLoginModal()">&times;</span>
      <h3>Admin Login</h3>
      <input type="password" id="passwordInput" placeholder="Enter Password">
      <button class="btn btn-primary" onclick="login()">Login</button>
    </div>
  </div>

  <!-- Confirm Modal -->
  <div id="confirmModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeConfirmModal()">&times;</span>
      <h3 id="confirmTitle">Confirm Action</h3>
      <p id="confirmMessage"></p>
      <button class="btn btn-danger" id="confirmBtn" onclick="performAction()">Confirm</button>
      <button class="btn btn-secondary" onclick="closeConfirmModal()">Cancel</button>
    </div>
  </div>

  <!-- Edit Modal -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeEditModal()">&times;</span>
      <h3>Edit Software</h3>
      <input type="text" id="editTitle" placeholder="Software Title">
      <input type="url" id="editImage" placeholder="Image URL">
      <input type="url" id="editDownload" placeholder="Download URL">
      <input type="text" id="editChecksum" placeholder="Checksum/Note">
      <button class="btn btn-success" onclick="saveEdit()">Save</button>
      <button class="btn btn-secondary" onclick="closeEditModal()">Cancel</button>
    </div>
  </div>

  <script>
    let softwares = [
      {id:1, title:'Telegram Desktop', image:'https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg', download:'https://github.com/botcha354-bot/tgdl/releases/download/v1.2.0.kak/tsetup-x64.6.1.3.exe', checksum:'Fast download'},
      {id:2, title:'Khmer Unicode', image:'ku.png', download:'https://github.com/botcha354-bot/tgdl/releases/download/app2-v1.0.0/KhmerUnicode2-0-1.exe', checksum:'Fast download'},
      {id:3, title:'WPS Office', image:'', download:'https://github.com/botcha354-bot/tgdl/releases/download/v2.0/wps_wid.cid-739407010.1758723826.exe', checksum:'Fast download'}
    ];
    let editingId = null;
    let pendingAction = null;
    const PASSWORD = '662004';

    document.addEventListener('DOMContentLoaded', () => {
      renderSoftwareList();
      renderManageList();
      attachSearch();
    });

    // LOGIN
    function showLoginModal(){ openModal('loginModal'); }
    function closeLoginModal(){ closeModal('loginModal'); document.getElementById('passwordInput').value=''; }
    function login(){
      const pw=document.getElementById('passwordInput').value;
      if(pw===PASSWORD){ document.getElementById('mainContent').classList.add('hidden'); document.getElementById('dashboard').style.display='block'; closeLoginModal(); }
      else alert('Incorrect password!');
    }
    function logout(){ document.getElementById('dashboard').style.display='none'; document.getElementById('mainContent').classList.remove('hidden'); editingId=null; }

    // MODAL HELP
    function openModal(id){ document.getElementById(id).style.display='block'; document.body.classList.add('modal-open'); }
    function closeModal(id){ document.getElementById(id).style.display='none'; document.body.classList.remove('modal-open'); }

    // CONFIRM
    function showConfirmModal(title,message,action,id=null){ document.getElementById('confirmTitle').textContent=title; document.getElementById('confirmMessage').textContent=message; pendingAction={action,id}; openModal('confirmModal'); }
    function closeConfirmModal(){ closeModal('confirmModal'); pendingAction=null; }
    function performAction(){ if(pendingAction){ if(pendingAction.action==='delete') deleteSoftware(pendingAction.id); closeConfirmModal(); } }

    // EDIT
    function showEditModal(id){ 
      const item=softwares.find(s=>s.id===id); 
      if(item){ editingId=id; document.getElementById('editTitle').value=item.title; document.getElementById('editImage').value=item.image; document.getElementById('editDownload').value=item.download; document.getElementById('editChecksum').value=item.checksum; openModal('editModal'); }
    }
    function closeEditModal(){ closeModal('editModal'); editingId=null; }
    function saveEdit(){
      const t=document.getElementById('editTitle').value;
      const i=document.getElementById('editImage').value;
      const d=document.getElementById('editDownload').value;
      const c=document.getElementById('editChecksum').value;
      const item=softwares.find(s=>s.id===editingId);
      if(item){ item.title=t; item.image=i; item.download=d; item.checksum=c; renderSoftwareList(); renderManageList(); closeEditModal(); }
    }

    // SOFTWARE MANAGEMENT
    function addSoftware(){
      const t=document.getElementById('newTitle').value;
      const i=document.getElementById('newImage').value;
      const d=document.getElementById('newDownload').value;
      const c=document.getElementById('newChecksum').value;
      if(t&&d){ softwares.push({id:Date.now(),title:t,image:i,download:d,checksum:c}); document.getElementById('newTitle').value=''; document.getElementById('newImage').value=''; document.getElementById('newDownload').value=''; document.getElementById('newChecksum').value=''; renderSoftwareList(); renderManageList(); }
      else alert('Title and Download URL required!');
    }
    function deleteSoftware(id){ softwares=softwares.filter(s=>s.id!==id); renderSoftwareList(); renderManageList(); document.getElementById('dashboard').scrollTop=0; }

    // RENDER SOFTWARE
    function renderSoftwareList(){
      const wrap=document.getElementById('softwareList');
      wrap.innerHTML='';
      const search=document.getElementById('searchBox')?.value.toLowerCase()||'';
      softwares.filter(s=>s.title.toLowerCase().includes(search)).forEach(s=>{
        const div=document.createElement('div'); div.className='software';
        div.innerHTML=`${s.image?`<img src="${s.image}" alt="${s.title}">`:''}<h2>${s.title}</h2><a class="download-btn" href="${s.download}" target="_blank">Download</a><p class="checksum">${s.checksum||''}</p>`;
        wrap.appendChild(div);
      });
    }

    // RENDER DASHBOARD LIST
    function renderManageList(){
      const manage=document.getElementById('manageList');
      manage.innerHTML='';
      softwares.forEach(s=>{
        const div=document.createElement('div'); div.className='software-item';
        div.innerHTML=`<h3>${s.title}</h3>
        <button class="btn btn-success" onclick="showEditModal(${s.id})">Edit</button>
        <button class="btn btn-danger" onclick="showConfirmModal('Delete','Delete ${s.title}?','delete',${s.id})">Delete</button>`;
        manage.appendChild(div);
      });
    }

    // SEARCH
    function attachSearch(){
      document.getElementById('searchBox').addEventListener('input', renderSoftwareList);
    }
  </script>
</body>
</html>
